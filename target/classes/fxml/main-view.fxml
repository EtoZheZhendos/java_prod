<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      spacing="10" styleClass="main-container">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Верхняя панель с заголовком и кнопкой выхода -->
    <HBox spacing="10" alignment="CENTER_LEFT">
        <Label text="Управление Бюджетом Студента" styleClass="title-label"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label fx:id="currentUserLabel" styleClass="user-info-label"/>
        <Button text="Выйти" onAction="#handleLogout" styleClass="logout-button"/>
    </HBox>

    <TabPane fx:id="mainTabPane">
        <Tab text="Главная" closable="false">
            <VBox spacing="20">
                <!-- Сводка -->
                <HBox spacing="20">
                    <VBox styleClass="summary-box">
                        <Label text="Общий доход"/>
                        <Label fx:id="totalIncomeLabel" styleClass="amount-label"/>
                    </VBox>
                    <VBox styleClass="summary-box">
                        <Label text="Общие расходы"/>
                        <Label fx:id="totalExpensesLabel" styleClass="amount-label"/>
                    </VBox>
                    <VBox styleClass="summary-box">
                        <Label text="Баланс"/>
                        <Label fx:id="balanceLabel" styleClass="amount-label"/>
                    </VBox>
                </HBox>

                <!-- График расходов -->
                <PieChart fx:id="expenseChart" title="Распределение расходов"/>

                <!-- Фильтры -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="searchField" promptText="Поиск по описанию"/>
                    <ComboBox fx:id="categoryFilter" promptText="Категория"/>
                    <ComboBox fx:id="statusFilter" promptText="Статус"/>
                    <ComboBox fx:id="userFilter" promptText="Пользователь"/>
                    <DatePicker fx:id="startDate" promptText="Начальная дата"/>
                    <DatePicker fx:id="endDate" promptText="Конечная дата"/>
                    <Button text="Поиск" onAction="#handleSearch"/>
                </HBox>

                <!-- Таблица транзакций -->
                <TableView fx:id="transactionsTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="dateColumn" text="Дата"/>
                        <TableColumn fx:id="typeColumn" text="Тип"/>
                        <TableColumn fx:id="categoryColumn" text="Категория"/>
                        <TableColumn fx:id="amountColumn" text="Сумма"/>
                        <TableColumn fx:id="descriptionColumn" text="Описание"/>
                        <TableColumn fx:id="statusColumn" text="Статус"/>
                        <TableColumn fx:id="userColumn" text="Пользователь"/>
                    </columns>
                </TableView>

                <!-- Кнопки управления -->
                <HBox spacing="10">
                    <Button text="Добавить транзакцию" onAction="#handleAddTransaction"/>
                </HBox>
            </VBox>
        </Tab>

        <Tab text="Категории" closable="false">
            <VBox spacing="10">
                <HBox spacing="10">
                    <Button text="Добавить категорию" onAction="#handleAddCategory"/>
                </HBox>
                <TableView fx:id="categoriesTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="categoryNameColumn" text="Название"/>
                        <TableColumn fx:id="categoryDescriptionColumn" text="Описание"/>
                        <TableColumn fx:id="categoryActionsColumn" text="Действия"/>
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <Tab fx:id="adminTab" text="Администрирование" closable="false">
            <VBox spacing="10">
                <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="usernameColumn" text="Имя пользователя"/>
                        <TableColumn fx:id="firstNameColumn" text="Имя"/>
                        <TableColumn fx:id="lastNameColumn" text="Фамилия"/>
                        <TableColumn fx:id="emailColumn" text="Email"/>
                        <TableColumn fx:id="roleColumn" text="Роль"/>
                        <TableColumn fx:id="createdAtColumn" text="Дата регистрации"/>
                        <TableColumn fx:id="activeColumn" text="Активен"/>
                        <TableColumn fx:id="userBalanceColumn" text="Баланс"/>
                    </columns>
                </TableView>
            </VBox>
        </Tab>
    </TabPane>
</VBox> 