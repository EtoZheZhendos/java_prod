<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      spacing="10" styleClass="main-container">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="header-panel">
        <padding>
            <Insets top="10" right="20" bottom="10" left="20"/>
        </padding>
        
        <Label text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð‘ÑŽÐ´Ð¶ÐµÑ‚Ð¾Ð¼ Ð¡Ñ‚ÑƒÐ´ÐµÐ½Ñ‚Ð°" styleClass="title-label"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button fx:id="addTransactionButton" 
                text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ" 
                onAction="#handleAddTransaction"/>
        <ToggleButton fx:id="themeToggle" text="ðŸŒ™" styleClass="theme-toggle"/>
        <Label fx:id="currentUserLabel" styleClass="user-info-label"/>
        <Button text="Ð’Ñ‹Ð¹Ñ‚Ð¸" onAction="#handleLogout" styleClass="logout-button"/>
    </HBox>

    <HBox spacing="20">
        <padding>
            <Insets top="10" right="20" bottom="10" left="20"/>
        </padding>

        <VBox styleClass="summary-box">
            <Label text="ÐžÐ±Ñ‰Ð¸Ð¹ Ð´Ð¾Ñ…Ð¾Ð´" styleClass="label"/>
            <Label fx:id="totalIncomeLabel" styleClass="value"/>
        </VBox>

        <VBox styleClass="summary-box">
            <Label text="ÐžÐ±Ñ‰Ð¸Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹" styleClass="label"/>
            <Label fx:id="totalExpensesLabel" styleClass="value"/>
        </VBox>

        <VBox styleClass="summary-box">
            <Label text="Ð‘Ð°Ð»Ð°Ð½Ñ" styleClass="label"/>
            <Label fx:id="balanceLabel" styleClass="value"/>
        </VBox>
    </HBox>

    <TabPane fx:id="mainTabPane" VBox.vgrow="ALWAYS" styleClass="custom-tab-pane">
        <Tab text="Ð“Ð»Ð°Ð²Ð½Ð°Ñ" closable="false">
            <VBox spacing="20">
                <TitledPane text="Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ð¾Ð²" styleClass="chart-container">
                    <PieChart fx:id="expenseChart"/>
                </TitledPane>

                <TitledPane text="Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹" styleClass="filters-container">
                    <VBox spacing="10">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <TextField fx:id="searchField" promptText="ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸ÑŽ" HBox.hgrow="ALWAYS"/>
                            <ComboBox fx:id="categoryFilter" promptText="ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ" minWidth="150"/>
                            <ComboBox fx:id="statusFilter" promptText="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ" minWidth="150"/>
                            <ComboBox fx:id="userFilter" promptText="ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ" minWidth="150"/>
                        </HBox>
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <DatePicker fx:id="startDate" promptText="ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð°Ñ‚Ð°"/>
                            <DatePicker fx:id="endDate" promptText="ÐšÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ Ð´Ð°Ñ‚Ð°"/>
                            <Button text="ÐŸÐ¾Ð¸ÑÐº" onAction="#handleSearch" styleClass="search-button"/>
                        </HBox>
                    </VBox>
                </TitledPane>

                <TableView fx:id="transactionsTable" VBox.vgrow="ALWAYS" styleClass="custom-table">
                    <columns>
                        <TableColumn fx:id="dateColumn" text="Ð”Ð°Ñ‚Ð°" minWidth="150"/>
                        <TableColumn fx:id="typeColumn" text="Ð¢Ð¸Ð¿" minWidth="100"/>
                        <TableColumn fx:id="categoryColumn" text="ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ" minWidth="150"/>
                        <TableColumn fx:id="amountColumn" text="Ð¡ÑƒÐ¼Ð¼Ð°" minWidth="100"/>
                        <TableColumn fx:id="descriptionColumn" text="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ" minWidth="200"/>
                        <TableColumn fx:id="statusColumn" text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ" minWidth="100"/>
                        <TableColumn fx:id="userColumn" text="ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ" minWidth="150"/>
                        <TableColumn fx:id="actionsColumn" text="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ" minWidth="100"/>
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <Tab text="ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸" closable="false">
            <VBox spacing="10">
                <HBox spacing="10">
                    <Button text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ" onAction="#handleAddCategory" styleClass="action-button"/>
                </HBox>
                <TableView fx:id="categoriesTable" VBox.vgrow="ALWAYS" styleClass="custom-table">
                    <columns>
                        <TableColumn fx:id="categoryNameColumn" text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" minWidth="200"/>
                        <TableColumn fx:id="categoryDescriptionColumn" text="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ" minWidth="300"/>
                        <TableColumn fx:id="categoryActionsColumn" text="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ" minWidth="200"/>
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <Tab fx:id="adminTab" text="ÐÐ´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ" closable="false">
            <VBox spacing="10">
                <TableView fx:id="usersTable" VBox.vgrow="ALWAYS" styleClass="custom-table">
                    <columns>
                        <TableColumn fx:id="usernameColumn" text="Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ" minWidth="150"/>
                        <TableColumn fx:id="firstNameColumn" text="Ð˜Ð¼Ñ" minWidth="150"/>
                        <TableColumn fx:id="lastNameColumn" text="Ð¤Ð°Ð¼Ð¸Ð»Ð¸Ñ" minWidth="150"/>
                        <TableColumn fx:id="emailColumn" text="Email" minWidth="200"/>
                        <TableColumn fx:id="roleColumn" text="Ð Ð¾Ð»ÑŒ" minWidth="100"/>
                        <TableColumn fx:id="createdAtColumn" text="Ð”Ð°Ñ‚Ð° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸" minWidth="150"/>
                        <TableColumn fx:id="activeColumn" text="ÐÐºÑ‚Ð¸Ð²ÐµÐ½" minWidth="100"/>
                        <TableColumn fx:id="userBalanceColumn" text="Ð‘Ð°Ð»Ð°Ð½Ñ" minWidth="150"/>
                    </columns>
                </TableView>
            </VBox>
        </Tab>
    </TabPane>
</VBox> 